<!DOCTYPE html>
<html>
    
    <head>
        <meta charset="utf-8" />
        <title>
            HTML5 Video Player
        </title>
        <link rel="stylesheet" href="css/video-js.css" type="text/css" media="screen" title="Video JS">
        <link rel="stylesheet" href="bbb.css" type="text/css" rel="stylesheet">
        
        <script src="js/json2.js" type="text/javascript" charset="utf-8"></script>
        <script src="http://code.jquery.com/jquery-latest.min.js"></script>
        <script src="js/jquery.tablednd_0_5.js"></script>
        <script src="js/video.js" type="text/javascript" charset="utf-8"></script>
        <script type="text/javascript" src="../BBB.js"></script>
        <script type="text/javascript">
            VideoJS.setupAllWhenReady();
            bbb.setupWhenReady({
                playerId: "player",
                tocId: "tblOfContents",
                chapterStorage: "server.php",
                statistics: true,
                watermark: true,
                metadataExport: {
                  formDivId: "formDiv",
                  cssLbl: "lblField",
                  cssInput: "inputField",
                  cssTitle: "frmTitle",
                  cssBtn: "btnField"
                }
                
            });

            bbb.onChangeVideo = function(currChap) {
                document.getElementById('bkmrkSrc').value = currChap.getSrc();
                document.getElementById('bkmrkTitle').value = currChap.getTitle();
                document.getElementById('bkmrkDescription').value = currChap.getDescription();
            };

            function setTime(timeToSet, isStart) {
                bbb.chapters.setStartEnd(timeToSet, isStart);
                printTime();
            }

            function printTime() {
                document.getElementById('spnDisplay').innerHTML = bbb.chapters.getFormattedRange();
            }

            function addElem() {
                try {
                    bbb.chapters.makeChapter({
                        src: document.getElementById('bkmrkSrc').value,
                        title: document.getElementById('bkmrkTitle').value,
                        description: document.getElementById('bkmrkDescription').value
                    });
                } catch (e) {
                    alert(e);
                }
                printTime();
                bbb.printTOC();
            }
        </script>
    </head>
    
    <body onload="printTime();">
        <div id="right" style="float:right" class="inputForm">
            <div id="panel">
                <b>
                    Create Chapter
                </b>
                <table>
                    <tr>
                        <td class="lblField">
                            Title
                        </td>
                        <td>
                            <input type="text" id="bkmrkTitle" name="bkmrkTitle" class="inputField" />
                        </td>
                    </tr>
                    <tr>
                        <td class="lblField">
                            Description
                        </td>
                        <td>
                            <input type="text" id="bkmrkDescription" name="bkmrkDescription" class="inputField" />
                        </td>
                    </tr>
                    <tr>
                        <td class="lblField">
                            Source
                        </td>
                        <td>
                            <input type="text" id="bkmrkSrc" name="bkmrkSrc" class="inputField" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                        </td>
                        <td class="inputField">
                            <input type="button" id="bkmrkStart" name="bkmrkStart" value="Set Start"
                            onclick="setTime(document.getElementById('player').currentTime, true);" />
                            <input type="button" id="bkmrkEnd" name="bkmrkEnd" value="Set End"
                            onclick="setTime(document.getElementById('player').currentTime, false);" />
                        </td>
                    </tr>
                    <tr>
                        <td class="lblField">
                            Chapter goes from
                        </td>
                        <td class="inputField">
                            <span id="spnDisplay" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                        </td>
                        <td>
                            <input value="Add Chapter" type="button" id="bkmrkSubmit" name="bkmrkSubmit"
                            onclick="javascript:addElem()" />
                        </td>
                    </tr>
                </table>
            </div>
        </div>
        
        <div id="formDiv" class="inputForm">
        </div>
        <div class="video-js-box">
<video id="player" width="400px" height="200px" style="top:0px; left:0px;" class="video-js" data-subtitles="demo-subtitles.ttxt" controls="controls" preload="auto">			
                <source src="video.ogv" type='video/ogg; codecs="theora, vorbis"' />
                <source src="" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"' />
                <source src="" type='video/webm; codecs="vp8, vorbis"' />
                <object id="flash_fallback_1" class="vjs-flash-fallback" width="640px"
                height="264px" type="application/x-shockwave-flash" data="http://releases.flowplayer.org/swf/flowplayer-3.2.1.swf">
                    <param name="movie" value="http://releases.flowplayer.org/swf/flowplayer-3.2.1.swf"
                    />
                    <param name="allowfullscreen" value="true" />
                    <param name="flashvars" value='config={"playlist":["http://video-js.zencoder.com/oceans-clip.png", {"url": "http://video-js.zencoder.com/oceans-clip.mp4","autoPlay":false,"autoBuffering":true}]}'
                    />
                </object>
            </video>
        </div>
        <div>
            <br/>
            <br/>
            <div style="float:right;">
                <table id="tblOfContents">
                </table>
            </div>
        </div>
		<input type="button" value="Check Order" onclick="bbb.checkOrder()" />
		<input type="button" value="Change Order" onclick="bbb.changeOrder()" />
		<input type="button" value="Test Local Storage" onclick="bbb.storage.setLocalStorage()" />
		<input type="button" value="Fetch Local Storage" onclick="bbb.storage.getLocalStorage()" />
    
    </body>

</html>